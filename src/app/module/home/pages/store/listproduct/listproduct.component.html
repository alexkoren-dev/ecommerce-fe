<div class="best-pro slider-items-products container">
  <div id="best-seller" class="product-flexslider hidden-buttons">
    <div class="slider-items  products-grid">
      <div class="container">
        <div class="row">
          <div class="item cursor-pointer col-sm-4 p-0" *ngFor="let dat of data; let i = index">
            <div class="item">
              <div class="item-inner">
                <div class="item-img">
                  <div class="item-img-info">
                    <div>
                      <ngx-gallery [options]="galleryOptions" [images]="dat['gallery']"></ngx-gallery>
                    </div>
                    <div class="item-box-hover">
                      <div class="box-inner">
                        <div class="add_cart mt-1 mr-1">
                          <button class="button btn-cart cursor-pointer"
                                  (click)="addProduct(dat)"
                                  type="button">
                            <span>Add to Cart</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="item-info" (click)="detail(dat.id)">
                  <div class="info-inner">
                    <div class="item-title mb-0">
                      <a href="#"
                         class="font-weight-600"
                         title="Retis lapen casen">{{dat['name'] | truncate : 25 :  '...' }}</a>
                    </div>
                    <div>
                      <a class="text-muted">
                        {{dat['shop_name'] | words : 4}}
                      </a>
                    </div>
                    <div class="item-content d-flex">
                      <ngx-stars [readonly]="true" initialStars="{{dat['score_shop']['score']}}"
                      customPadding="2px" color="#FFC400"></ngx-stars>
                      <span class="text-muted">({{dat['score_shop']['count']}})</span>
                    </div>
                    <div *ngIf="dat['is_available'] && ( dat['is_available']['isAvailable']!==false)">
                      <div class="d-flex"
                           *ngIf="dat['variations'] && (dat['variations']['length']>1)">
                        <div class="price-normal">
                                          <span class="item-price-amount">Desde
                                            {{dat['variations']['item'][0]['price_normal'] |number:'1.2-2'}}
                                            <span class="euro-sign">€</span></span>
                        </div>
                        <div class="price-regular">
                                          <span class="item-price-amount text-muted">
                                              {{dat['variations']['item'][0]['price_regular'] |number:'1.2-2'}}
                                              </span>
                        </div>
                      </div>

                      <div class="d-flex"
                           *ngIf="dat['variations'] && (dat['variations']['length']===1)">
                        <div class="price-normal">
                                            <span class="item-price-amount">
                                                {{dat['variations']['item'][0]['price_normal'] |number:'1.2-2'}}
                                              <span class="euro-sign">€</span></span>
                        </div>
                        <div class="price-regular">
                                            <span class="item-price-amount text-muted">
                                                {{dat['variations']['item'][0]['price_regular'] |number:'1.2-2'}}
                                                </span>
                        </div>
                      </div>

                      <div *ngIf="dat['variations'] && (dat['variations']['length']===0)">
                                      <span class="item-price-amount-unavailable text-muted">
                                          <fa name="history"></fa>
                                       No stock</span>
                      </div>
                    </div>

                    <div *ngIf="dat['is_available'] && ( dat['is_available']['isAvailable']===false)">
                      <div *ngIf="dat['is_available']['nextOpen']">

                        <div>
                                      <span
                                        tooltip="Disponible"
                                        class="item-price-avalible-on text-success">
                                          <fa name="hourglass" animation="spin" rotate="180" class="mr-1"></fa>
                                          <span class="time-ago-string" timeago
                                                [date]="timeAgoNext(dat['is_available']['minutes'])"></span>
                                      </span>
                        </div>
                      </div>
                      <div *ngIf="!dat['is_available']['nextOpen']">
                                    <span class="item-price-amount-unavailable text-muted">
                                        <fa name="history"></fa>
                                     No disponible</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
