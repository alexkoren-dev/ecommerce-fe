<div *ngIf="loading" class="best-pro slider-items-products container">
  <div class="CollectionGrid container min-height-300">
    <div class="CollectionGrid-tile hover-overlay-light">
      <div class="timeline-item">
        <div class="animated-background" style="height: 150px">
        </div>
        <div class="animated-background mt-3" style="height: 40px">
          <div class="background-masker header-top"></div>
          <div class="background-masker header-left"></div>
          <div class="background-masker header-right"></div>
          <div class="background-masker header-bottom"></div>
          <div class="background-masker subheader-left"></div>
          <div class="background-masker subheader-right"></div>
          <div class="background-masker subheader-bottom"></div>

        </div>
      </div>
    </div>
    <div class="CollectionGrid-tile hover-overlay-light">
      <div class="timeline-item">
        <div class="animated-background" style="height: 150px">
        </div>
        <div class="animated-background mt-3" style="height: 40px">
          <div class="background-masker header-top"></div>
          <div class="background-masker header-left"></div>
          <div class="background-masker header-right"></div>
          <div class="background-masker header-bottom"></div>
          <div class="background-masker subheader-left"></div>
          <div class="background-masker subheader-right"></div>
          <div class="background-masker subheader-bottom"></div>

        </div>
      </div>
    </div>
    <div class="CollectionGrid-tile hover-overlay-light">
      <div class="timeline-item">
        <div class="animated-background" style="height: 150px">
        </div>
        <div class="animated-background mt-3" style="height: 40px">
          <div class="background-masker header-top"></div>
          <div class="background-masker header-left"></div>
          <div class="background-masker header-right"></div>
          <div class="background-masker header-bottom"></div>
          <div class="background-masker subheader-left"></div>
          <div class="background-masker subheader-right"></div>
          <div class="background-masker subheader-bottom"></div>

        </div>
      </div>
    </div>
  </div>
  <div class="CollectionGrid container min-height-300">
    <div class="CollectionGrid-tile hover-overlay-light">
      <div class="timeline-item">
        <div class="animated-background" style="height: 150px">
        </div>
        <div class="animated-background mt-3" style="height: 40px">
          <div class="background-masker header-top"></div>
          <div class="background-masker header-left"></div>
          <div class="background-masker header-right"></div>
          <div class="background-masker header-bottom"></div>
          <div class="background-masker subheader-left"></div>
          <div class="background-masker subheader-right"></div>
          <div class="background-masker subheader-bottom"></div>

        </div>
      </div>
    </div>
    <div class="CollectionGrid-tile hover-overlay-light">
      <div class="timeline-item">
        <div class="animated-background" style="height: 150px">
        </div>
        <div class="animated-background mt-3" style="height: 40px">
          <div class="background-masker header-top"></div>
          <div class="background-masker header-left"></div>
          <div class="background-masker header-right"></div>
          <div class="background-masker header-bottom"></div>
          <div class="background-masker subheader-left"></div>
          <div class="background-masker subheader-right"></div>
          <div class="background-masker subheader-bottom"></div>

        </div>
      </div>
    </div>
    <div class="CollectionGrid-tile hover-overlay-light">
      <div class="timeline-item">
        <div class="animated-background" style="height: 150px">
        </div>
        <div class="animated-background mt-3" style="height: 40px">
          <div class="background-masker header-top"></div>
          <div class="background-masker header-left"></div>
          <div class="background-masker header-right"></div>
          <div class="background-masker header-bottom"></div>
          <div class="background-masker subheader-left"></div>
          <div class="background-masker subheader-right"></div>
          <div class="background-masker subheader-bottom"></div>

        </div>
      </div>
    </div>
  </div>
</div>
<div *ngIf="!loading" class="best-pro slider-items-products container">
  <div id="best-seller" class="product-flexslider hidden-buttons">
    <div class="slider-items  products-grid">
      <div class="container p-0">
        <div class="row">
            <div class="item col-sm-4 pr-1 mb-3" *ngFor="let dat of data; let i = index">
                <div
                  *ngIf="dat &&  dat['is_available'] && dat['is_available']['isAvailable']"
                  class="box-buttons-top-product">
                  <button id="btn-car" [ngClass]="{'btn-default':!loading_save, 'btn-default':loading_save}" 
                  class="btn btn-add-cart-shopping"
                          [disabled]="loading_save"
                          type="button" (click)="open(dat)">
                    <span *ngIf="!loading_save">
                        <img class="mega-menu-hover" alt="" 
                        src="../../../../../../assets/images/shopping-cart.svg" [style.width]="'20px'">
                    </span>
                    <fa *ngIf="loading_save" name="spinner" animation="spin" size="lg"></fa>
                  </button>
                  <button id="btn-car" 
                  [style.left]="'45px'"
                  [ngClass]="{'btn-default':!loading_save, 'btn-default':loading_save}" 
                  [routerLink]="['/','single',dat['id']+'-'+util.slug(dat['name'])]"
                  class="btn btn-add-cart-shopping"
                          [disabled]="loading_save"
                          type="button">
                    <span *ngIf="!loading_save">
                        <img  alt="" 
                        src="../../../../../../assets/images/visibility.svg" [style.width]="'20px'">
                    </span>
                    <fa *ngIf="loading_save" name="spinner" animation="spin" size="lg"></fa>
                  </button>             
                </div>
                <div class="item">
                  <div class="item-inner">
                    <div class="item-img">
                      <div class="item-img-info">
                        <ngx-gallery [options]="galleryOptions" [images]="dat['gallery']"></ngx-gallery>
                      </div>
                    </div>
                    <a *ngIf="dat && dat['name']" [routerLink]="['/','single',dat['id']+'-'+util.slug(dat['name'])]">
                      <div class="item-info">
                        <div id="info-box" class="info-inner">
                          <div *ngIf="dat['is_available']['nextOpen']" class="bubble-shipping">
                          </div>
                          <div class="item-title mb-0">
                            <span class="btn-link">
                                {{dat['name'] | truncate : 25 :  '...' }}
                            </span>  
                          </div>
                          <div>
                            <a class="text-muted" [routerLink]="['/','store',dat['shop_id'],util.slug(dat['shop_name'])]">
                              {{dat['shop_name']|  words : 4 }}
                            </a>
                          </div>
                          <div class="item-content d-flex">
                            <ngx-stars [readonly]="true" initialStars="{{dat['score_shop']['score']}}"
                                       customPadding="2px" color="#FFC400"></ngx-stars>
                            <span class="text-muted">({{dat['score_shop']['count']}})</span>
                          </div>
                          <div *ngIf="dat['is_available'] && ( dat['is_available']['isAvailable']!==false)">
                            <div class="d-flex"
                                 *ngIf="dat['variations'] && (dat['variations']['length']>1)">
                              <div class="price-normal">
                                      <span class="item-price-amount">Desde
                                        {{dat['variations']['item'][0]['price_normal'] |number:'1.2-2'}}
                                        <span class="euro-sign">€</span></span>
                              </div>
                              <div class="price-regular">
                                      <span class="item-price-amount text-muted">
                                          {{dat['variations']['item'][0]['price_regular'] |number:'1.2-2'}}
                                          </span>
                              </div>
                            </div>
    
                            <div class="d-flex"
                                 *ngIf="dat['variations'] && (dat['variations']['length']===1)">
                              <div class="price-normal">
                                        <span class="item-price-amount">
                                            {{dat['variations']['item'][0]['price_normal'] |number:'1.2-2'}}
                                          <span class="euro-sign">€</span></span>
                              </div>
                              <div class="price-regular">
                                        <span class="item-price-amount text-muted">
                                            {{dat['variations']['item'][0]['price_regular'] |number:'1.2-2'}}
                                            </span>
                              </div>
                            </div>
    
                            <div *ngIf="dat['variations'] && (dat['variations']['length']===0)">
                                  <span class="item-price-amount-unavailable text-muted">
                                      <fa name="history"></fa>
                                   No stock</span>
                            </div>
                          </div>
    
                          <div *ngIf="dat['is_available'] && ( dat['is_available']['isAvailable']===false)">
                            <div *ngIf="dat['is_available']['nextOpen']">
    
                              <div>
                                  <span
                                    tooltip="Disponible"
                                    class="item-price-avalible-on">
                                      <fa name="clock" animation="spin" rotate="180" class="mr-1"></fa>
                                      <span class="time-ago-string" timeago
                                            [date]="timeAgoNext(dat['is_available']['minutes'])"></span>
    
                                  </span>
                              </div>
                            </div>
                            <div *ngIf="!dat['is_available']['nextOpen']">
                                <span class="item-price-amount-unavailable text-muted">
                                    <fa name="history"></fa>
                                 No disponible</span>
                            </div>
    
                          </div>
    
                        </div>
                      </div>
                    </a>
    
                  </div>
                </div>
              </div>
        </div>
      </div>
    </div>
  </div>
</div>
